<html devsite><head>
  <title>تم الاختراق باستخدام البرامج الضارة</title>
  <meta name="project_path" value="/web/fundamentals/_project.yaml"/>
  <meta name="book_path" value="/web/fundamentals/_book.yaml"/>
</head>
  <body>
<p>تتعلق هذه الخطوة بالمواقع التي تم الاستيلاء عليها لتوزيع البرامج الضارة، بحيث يتم غالبًا عرض التحذير <em>"قد يضر هذا الموقع جهاز الكمبيوتر"</em> في نتائج البحث. وتعد هذه الخطوة واحدة من أطول خطوات عملية الاسترداد.  وفي هذه الخطوة، يلزمك إعداد قائمة تتضمن الملفات التالفة على موقعك.
  وستستخدم هذه القائمة في خطوة لاحقة <a href="clean_site">تنظيف الموقع وصيانته</a>.</p>
  <p>وإذا كان موقعك مصابًا بمحتوى غير مرغوب فيه وليس برامج ضارة، ويعرض التحذير <em>"ربما تم اختراق هذا الموقع"</em> في نتائج البحث، يُرجى الاطلاع على الصفحة <a href="hacked_with_spam">تقييم ضرر المحتوى غير المرغوب فيه (تم اختراق الموقع باستخدام المحتوى غير المرغوب فيه)</a>.</p>

    <div class="video-wrapper">
      <iframe class="devsite-embedded-youtube-video" data-video-id="Snt45fZQIiU" data-autohide="1" data-showinfo="0" frameborder="0" allowfullscreen>
      </iframe>
    </div>

<h3>ستحتاج إلى ما يلي:</h3>
<ul>
  <li>إمكانية دخول مشرف Shell/طرفي إلى خوادم الموقع: الويب وقواعد البيانات والملفات</li>
  <li>معرفة بأوامر shell/الطرفية</li>
  <li>إمكانية تشغيل طلبات بحث SQL على قاعدة البيانات.</li>
</ul>
<h3>الإجراءات اللازمة:</h3>

<div class="action">
<p>تتضمن هذه الخطوة ثلاثة أقسام:</p>
<ul>
  <li><a href="#preparation">الإعداد</a></li>
  <li><a href="#investigation">التحقق من أنواع الإصابة بأنواع محددة من البرامج الضارة</a></li>
  <li><a href="#assessment">تقييم عام للضرر في نظام الملفات</a></li>
</ul>
</div>

<a name="preparation"></a>
<h3>الإعداد</h3>
<ol>
  <li>تجنب استخدام متصفح للاطلاع على الصفحات على موقعك. ونظرًا لأن البرامج الضارة غالبًا ما تنتشر من خلال استغلال الثغرات الأمنية في متصفحك، فقد يؤدي فتح صفحة مصابة ببرامج ضارة في المتصفح إلى الإضرار بجهاز الكمبيوتر الذي تستخدمه.</li>
  <li>أنشئ مستندًا لتسجيل ما يتم التوصل إليه في هذه الخطوة. سيتضمن المستند في النهاية (كحد أدنى) اسم/موقع كل ملف تالف وملاحظات حول الكيفية التي تمت إصابته بها، وسيتم عرضه كأساس <a href="clean_site">لتنظيف الموقع وصيانته</a>.</li>
  <li>يمكنك الاطلاع على مزيد من المصادرعند اللزوم:
    <ul>
      <li>شاهد مقطع الفيديو الوارد أعلاه للاطلاع على كيفية عمل البرامج الضارة وكيف يمكنك حماية نفسك أثناء التحقق من وجود برامج ضارة.</li>
      <li>راجع <a href="/safe-browsing/">صفحة تشخيص التصفح الآمن من Google</a> للاطلاع على معلومات عامة حول ما إذا كان الموقع قد يشكل ضررًا محتملاً للمستخدمين أم لا. ويمكنك الاطلاع على حالة البيانات لموقعك على عنوان URL شبيه بما يلي:
      <pre>http://www.google.com/safebrowsing/diagnostic?site=&lt;your-site&gt;</pre>
      على سبيل المثال:
      <code>http://www.google.com/safebrowsing/diagnostic?site=webmastercentralblog.blogspot.com</code></li>
    </ul>
  </li>
  <li>استخدم <a href="https://www.google.com/search?q=cURL">cURL</a> أو <a href="https://www.google.com/search?q=Wget">Wget</a> لتنفيذ طلبات HTTP (لجلب صفحة ما مثلاً).
    <p>وتعد هذه الأدوات المتوفرة مجانًا مفيدة في تشخيص عمليات إعادة التوجيه، كما أنها مرنة بحيث تتضمن معلومات عن المحيل أو وكيل المستخدم. ويساعد تضمين محيل أو وكيل مستخدم معين في محاكاة المخترقين بسبب أن المخترقين ربما يعرضون المحتوى الضار فقط للمستخدمين الذين لديهم وكيل مستخدم أو محيل بعينه وذلك لاستهداف "أشخاص حقيقيين" إلى حد أبعد، ويمكنه تجنب الاكتشاف من مالكي الموقع وأدوات البحث عن البرامج الضارة.</p>
    <pre>$curl -v --referer "http://www.google.com" &lt;your-url&gt;</pre></li>
</ol>

<a name="investigation"></a>
<h3>التحقق من أنواع معينة للإصابة ببرامج ضارة على موقعك</h3>
<ol>
  <li>حدد موقعك الذي تم إثبات ملكيته في Search Console، ثم انقر على <strong>مشاكل الأمان</strong>.</li>
  <li> تحقق من جميع فئات البرامج الضارة (مثل تهيئة الخادم وإدخال SQL) المدرجة في مشاكل الأمان لموقعك. ويمكن الحصول على معلومات إضافية حول عناوين URL المصابة من الفئة من خلال النقر على "عرض التفاصيل". (وقد تتضمن التفاصيل نماذج لمقتطفات شفرات تم إدخالها بواسطة المخترق). ومع كل فئة انسخ في مستند التحقيق ما يلي:
    <ul>
      <li>جميع نماذج عناوين URL المصابة والمدرجة لفئة البرامج الضارة في مشاكل الأمان.</li>
      <li>أية صفحات أخرى تالفة اكتشفتها أثناء التحقيق.</li>
      <li>تفاصيل النتائج التي توصلت إليها عن عناوين URL المصابة، مثل نوع الضرر الذي حدث.</li>
    </ul>
  </li>
  <li>في ما يلي المعلومات المطلوبة للمساعدة في التحقق من كل فئة من فئات البرامج الضارة على حدة:
    <ul>
      <li><a href="https://www.support.google.com/webmasters/answer/3024318">تهيئة الخادم</a></li>
      <li><a href="https://www.support.google.com/webmasters/answer/3024309">إدخال SQL</a></li>
      <li><a href="https://www.support.google.com/webmasters/answer/3024381">نموذج الخطأ</a></li>
      <li><a href="https://www.support.google.com/webmasters/answer/3024344">إدخال الشفرة</a></li>
    </ul>
  </li>
</ol>

<a name="assessment"></a>
<h4>تقييم عام للضرر في نظام الملفات</h4>
        <div class="video-wrapper">
      <iframe class="devsite-embedded-youtube-video" data-video-id="2A4dLkXXUjo" data-autohide="1" data-showinfo="0" frameborder="0" allowfullscreen>
      </iframe>
    </div>

<p>بعد ذلك، ستحتاج إلى تسجيل الدخول إلى نظام ملفات موقعك لإجراء مزيد من التحقيق التفصيلي. انتبه إلى أن المخترق ربما يكون قد عدل صفحات حالية أو سجلات قواعد بيانات أو أنشأ صفحات جديدة تمامًا غير مرغوب فيها، أو كتب دالات لعرض المحتوى غير المرغوب فيه على الصفحات النظيفة، أو ترك "الأبواب الخلفية" التي تتيح له تكرار الدخول إلى موقعك أو مواصلة تنفيذ مهام ضارة في حال عدم الحذف، إلى جانب أشياء أخرى.</p>
<p>وإذا كان موقعك متوفرًا عبر الإنترنت، يمكنك إزالته خلال هذه الخطوة.</p>
<ol>
  <li>وإذا كانت لديك نسخة احتياطية معروفة وجيدة من موقعك، حدد الملفات التي تم إنشاؤها أو تعديلها منذ وقت الاحتفاظ بالنسخة الاحتياطية. أضف هذه الملفات إلى القائمة نظرًا لأنه من المرجح أن تحتاج إليها لمزيد من التحقق. وعلى الأنظمة التي تعمل بـ Unix، يمكنك استخدام أمر مثل:
  <pre>$ diff -qr &lt;current-directory&gt; &lt;backup-directory&gt;</pre>
  على سبيل المثال:
  <pre>$ diff -qr www/ backups/full-backup-20120124/</pre>
  وكذلك،
  <pre>$ md5sum &lt;current-page&gt; &lt;backup-page&gt;</pre>
  على سبيل المثال:
  <pre>$ md5sum www/page.html backups/full-backup-20120124/page.html</pre></li>
  <li>افحص <strong>الخادم وإمكانية الدخول وسجلات الأخطاء</strong> بحثًا عن أي نشاط مريب، مثل محاولات تسجيل الدخول المخفقة وسجل الأوامر (خاصة كجذر) وإنشاء حسابات مستخدمين غير معروفة وهكذا. انتبه إلى أن المخترق ربما يكون غيّر هذه السجلات لأغراض خاصة به. (ويمكن الرجوع إلى بعض الأمثلة الواردة في الفيديو المتعلق <a href="vulnerability">بتحديد الثغرة الأمنية</a> إن كان ذلك مفيدًا.)</li>
  <li>افحص <strong>ملفات التهيئة</strong>, مثل ‎.htaccess وhttpd.conf، بالنسبة إلى عمليات إعادة التوجيه.
    غالبًا ما ينشئ المخترق عمليات إعادة تهيئة مشروطة بناءً على وكيل المستخدم والوقت خلال ساعات اليوم أوالمحيل.</li>
  <li>افحص أذونات المجلدات والملفات المفرطة في التساهل أيضًا. فكثيرًا ما يتلاعب المخترق بالأذونات بحيث يتمكن من الدخول إلى الموقع مرة أخرى إذا لم يتم اكتشاف الأذونات التي تتضمن تساهلاً بواسطة مالك الموقع. وقد تؤدي الملفات التي تزيد عن 644 (rw-r--r--) والمجلدات التي تزيد عن 755 (rwxr-xr-x) في حدوث مشاكل بالأمان. ولذلك تأكد من أن أية أذونات غير محكمة تمثل أهمية كبيرة. في الأنظمة التي تعمل بـ Unix، جرب ما يلي:
  <pre>$ find &lt;your-dir&gt; -type d -not -perm 755 -exec ls -ld {} \;</pre>
  <pre>$ find &lt;your-dir&gt; -type f -not -perm 644 -exec ls -la {} \;</pre></li>
  <li>​وإذا كانت لديك قاعدة بيانات، تحقق من السجلات واحدًا تلو الآخر باستخدام أداة مثل <a href="https://www.phpmyadmin.net/home_page/index.php">phpMyAdmin</a>.</li>
</ol>

<h2>الخطوة التالية</h2>
<p>الخطوة التالية في العملية هي <a href="vulnerability">تحديد الثغرة الأمنية</a>.</p>

</body></html>
