<!DOCTYPE html>
<html devsite>

<head>
  <meta name="project_path" value="/web/tools/workbox/_project.yaml" />
  <meta name="book_path" value="/web/tools/workbox/_book.yaml" />
  <meta name="gtm_var" data-key="docType" data-value="reference">
  <title>Source: workbox-precaching/addRoute.mjs</title>
  <link href="jsdoc.css" rel="stylesheet">
</head>

<body>
  <div id="jsdoc-body-container">
    <div id="jsdoc-content">
      <div id="jsdoc-content-container">
        <div id="jsdoc-banner" role="banner">
        </div>
        <div id="jsdoc-main" role="main">
          <header class="page-header">
            <h1>Source: workbox-precaching/addRoute.mjs</h1>
          </header>
          <article>
            <pre class="prettyprint linenums"><code>
/*
  Copyright 2019 Google LLC
  Use of this source code is governed by an MIT-style
  license that can be found in the LICENSE file or at
  https://opensource.org/licenses/MIT.
*/

import {addFetchListener} from &#x27;./utils/addFetchListener.mjs&#x27;;
import &#x27;./_version.mjs&#x27;;


let listenerAdded &#x3D; false;

/**
 * Add a &#x60;fetch&#x60; listener to the service worker that will
 * respond to
 * [network requests]{@link https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers#Custom_responses_to_requests}
 * with precached assets.
 *
 * Requests for assets that aren&#x27;t precached, the &#x60;FetchEvent&#x60; will not be
 * responded to, allowing the event to fall through to other &#x60;fetch&#x60; event
 * listeners.
 *
 * @param {Object} options
 * @param {string} [options.directoryIndex&#x3D;index.html] The &#x60;directoryIndex&#x60; will
 * check cache entries for a URLs ending with &#x27;/&#x27; to see if there is a hit when
 * appending the &#x60;directoryIndex&#x60; value.
 * @param {Array&amp;lt;RegExp&gt;} [options.ignoreURLParametersMatching&#x3D;[/^utm_/]] An
 * array of regex&#x27;s to remove search params when looking for a cache match.
 * @param {boolean} [options.cleanURLs&#x3D;true] The &#x60;cleanURLs&#x60; option will
 * check the cache for the URL with a &#x60;.html&#x60; added to the end of the end.
 * @param {workbox.precaching~urlManipulation} [options.urlManipulation]
 * This is a function that should take a URL and return an array of
 * alternative URL&#x27;s that should be checked for precache matches.
 *
 * @alias workbox.precaching.addRoute
 */
export const addRoute &#x3D; (options) &#x3D;&gt; {
  if (!listenerAdded) {
    addFetchListener(options);
    listenerAdded &#x3D; true;
  }
};
</code></pre>
          </article>
        </div>
      </div>
      <nav id="jsdoc-toc-nav" role="navigation"></nav>
    </div>
  </div>
</body>

</html>