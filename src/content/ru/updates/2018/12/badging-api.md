project_path: "/web/_project.yaml"
book_path: "/web/updates/_book.yaml"
description: API Badging - это новый API веб-платформы, который позволяет установленным
  веб-приложениям устанавливать значок для всего приложения, отображаемый в месте,
  связанном с операционной системой, например на полке или домашнем экране.

{# wf_published_on: 2018-12-11 #} {# wf_updated_on: 2019-08-21 #} {#
wf_featured_image: /web/updates/images/generic/notifications.png #} {# wf_tags:
capabilities,badging,install,progressive-web-apps,serviceworker,notifications,origintrials
#} {# wf_featured_snippet: The Badging API is a new web platform API that allows
installed web apps to set an application-wide badge, shown in an
operating-system-specific place associated with the application, such as the
shelf or home screen. Badging makes it easy to subtly notify the user that there
is some new activity that might require their attention, or it can be used to
indicate a small amount of information, such as an unread count. #} {#
wf_blink_components: UI>Browser>WebAppInstalls #}

{# When updating this post, don't forget to update /updates/capabilities.md #}

# Значок для значков приложений {: .page-title }

{% include "web/_shared/contributors/petelepage.html" %}

<div class="clearfix"></div>

<aside class="caution">В настоящее время мы работаем над этим API в рамках
проекта новых <a href="/web/updates/capabilities">возможностей</a> , и начиная с
Chrome 73, он доступен в качестве <a href="#ot"><b>пробной</b></a> версии. Этот
пост будет обновляться по мере развития API Badging. <br> <b>Последнее
обновление:</b> 21 августа 2019 г.</aside>

## Что такое Badging API? {: #what }

<figure class="attempt-right">
  <img src="/web/updates/images/2018/12/badges-on-windows.jpg">
<figcaption>Пример Twitter с 8 уведомлениями и другим приложением,
показывающим значок типа флага.</figcaption>
</figure>

Badging API - это новый API веб-платформы, который позволяет установленным
веб-приложениям устанавливать значок для всего приложения, отображаемый в месте,
связанном с приложением, в зависимости от операционной системы (например, на
полке или домашнем экране).

Бэджинг позволяет легко уведомлять пользователя о некоторых новых действиях,
которые могут потребовать его внимания, или его можно использовать для указания
небольшого объема информации, например, непрочитанного количества.

Значки, как правило, более удобны для пользователя, чем уведомления, и их можно
обновлять с гораздо большей частотой, поскольку они не прерывают пользователя. И
поскольку они не прерывают пользователя, для их использования не требуется
специального разрешения.

[Прочитайте
объяснение](https://github.com/WICG/badging/blob/master/explainer.md) {: .button
.button-primary }

<div class="clearfix"></div>

### Предлагаемые варианты использования API Badging {: #use-cases }

Примеры сайтов, которые могут использовать этот API:

- Чат, электронная почта и социальные приложения для оповещения о поступлении
новых сообщений или отображения количества непрочитанных элементов.
- Приложения для повышения производительности, сигнализирующие о завершении
длительной фоновой задачи (например, рендеринга изображения или видео).
- Игры, чтобы сигнализировать о необходимости действий игрока (например, в
шахматах, когда наступает ход игрока).

## Текущий статус {: #status }

шаг | Статус
--- | ---
1. Создать объяснитель | [полный](https://github.com/WICG/badging/blob/master/explainer.md)
2. Создать первоначальный проект спецификации | [полный](https://wicg.github.io/badging/)
**3. Сбор отзывов и повторение дизайна** | [**В ходе выполнения**](#feedback)
**4. Исходное испытание** | [**В ходе выполнения**](#ot)
5. Запуск | Не начато

### Увидеть это в действии

1. Используя Chrome 73 или новее в Windows или Mac, откройте [демонстрацию
Badging API](https://badging-api.glitch.me/) .
2. При появлении запроса нажмите « **Установить»** для установки приложения или
используйте меню Chrome для его установки, затем откройте его как установленный
PWA. Обратите внимание, что он должен работать как установленный PWA (на панели
задач или в доке).
3. Нажмите кнопку « **Установить»** или « **Очистить»** , чтобы установить или
удалить значок со значка приложения. Вы также можете указать число для *значения
значка* .

Примечание. Хотя API Badging *в Chrome* требует установленного приложения со
значком, который на самом деле может быть отмечен значком, мы не рекомендуем
делать вызовы API Badging в зависимости от состояния установки. API Badging
может применяться в *любом месте, где* браузер может захотеть показать значок,
поэтому разработчики не должны делать никаких предположений о том, в каких
ситуациях браузер будет работать со значками. Просто вызовите API, когда он
существует. Если это работает, это работает. Если нет, то просто нет.

## Как использовать Badging API {: #use }

Начиная с Chrome 73, Badging API доступен в качестве пробной версии для Windows
(7+) и macOS. [Исходные
испытания](https://github.com/GoogleChrome/OriginTrials/blob/gh-pages/README.md)
позволяют вам опробовать новые функции и дать отзыв о юзабилити, практичности и
эффективности нам и сообществу веб-стандартов. Для получения дополнительной
информации см. [Руководство
по](https://github.com/GoogleChrome/OriginTrials/blob/gh-pages/developer-guide.md)
ознакомительным [испытаниям для
веб-разработчиков](https://github.com/GoogleChrome/OriginTrials/blob/gh-pages/developer-guide.md)
.

### Поддержка пропуска на разных платформах

API Badging поддерживается (в ознакомительной версии) в Windows и macOS. Android
не поддерживается, потому что он требует, чтобы вы показывали уведомление, хотя
это может измениться в будущем. Поддержка Chrome OS находится на стадии
реализации бейджинга на платформе.

### Зарегистрироваться на пробную версию {: #ot }

1. [Запросите
токен](https://developers.chrome.com/origintrials/#/view_trial/1711367858400788481)
для вашего происхождения.
2. Добавьте токен на свои страницы, есть два способа предоставить этот токен на
всех страницах вашего происхождения:
-  Добавьте тег `<meta>` `origin-trial` `<meta>` любой страницы. Например,
это может выглядеть примерно так: `<meta http-equiv="origin-trial"
content="TOKEN_GOES_HERE">`
-  Если вы можете настроить свой сервер, вы также можете предоставить токен
на страницах, используя HTTP-заголовок `Origin-Trial` . Полученный заголовок
ответа должен выглядеть примерно так: `Origin-Trial: TOKEN_GOES_HERE`

### Альтернативы пробной версии происхождения

Если вы хотите поэкспериментировать с API-интерфейсом Badging локально, без
пробного запуска, включите флаг `#enable-experimental-web-platform-features` в
`chrome://flags` .

### Использование Badging API во время ознакомительной версии

Собачья еда: во время ознакомительной версии API будет доступен через
`window.ExperimentalBadge` . Приведенный ниже код основан на текущем дизайне и
будет изменен до того, как он появится в браузере как стандартизированный API.

Чтобы использовать Badging API, ваше веб-приложение должно соответствовать
[критериям установки Chrome](/web/fundamentals/app-install-banners/#criteria) ,
а пользователь должен добавить его на свой домашний экран.

Интерфейс `ExperimentalBadge` является объектом-членом в `window` . Он содержит
два метода:

- `set([number])` : устанавливает значок приложения. Если указано значение, в
противном случае установите значок на указанное значение, отобразите простую
белую точку (или другой флаг в зависимости от платформы).
- `clear()` : удаляет значок приложения.

```js
// In a web page
const unreadCount = 24;
window.ExperimentalBadge.set(unreadCount);
```

`ExperimentalBadge.set()` и `ExperimentalBadge.clear()` могут вызываться со
страницы переднего плана или, возможно, в будущем, работника сервиса. В любом
случае это влияет на все приложение, а не только на текущую страницу.

В некоторых случаях ОС может не позволять точное представление значка, в этом
случае браузер будет пытаться обеспечить лучшее представление для этого
устройства. Например, хотя API-интерфейс Badging не поддерживается в Android, в
Android всегда отображается только точка вместо числового значения.

Примечание. Не думайте о том, как пользовательский агент хочет отображать
значок. Мы ожидаем, что некоторые пользовательские агенты возьмут число типа
«4000» и перепишут его как «99+». Если вы насытите его самостоятельно (например,
до «99»), то «+» не появится. Независимо от фактического числа, просто
установите `Badge.set(unreadCount)` и позвольте пользовательскому агенту
разобраться с его отображением.

## Обратная связь {: #feedback }

Нам нужна ваша помощь, чтобы гарантировать, что Badging API работает так, чтобы
удовлетворить ваши потребности и чтобы мы не пропустили ни одного ключевого
сценария.

<aside class="key-point"><b>Нам нужна твоя помощь!</b> - Будет ли текущий дизайн
(допускающий либо целое число, либо значение флага) соответствовать вашим
потребностям? Если этого не произойдет, пожалуйста, сообщите о проблеме в <a
href="https://github.com/WICG/badging/issues">репозиторий WICG / badging</a> и
предоставьте как можно больше подробностей. Кроме того, есть ряд <a
href="https://github.com/WICG/badging/blob/master/choices.md">открытых
вопросов</a> , которые все еще обсуждаются, и нам было бы интересно услышать
ваши отзывы.</aside>

Нам также интересно узнать, как вы планируете использовать Badging API:

- У вас есть идея для варианта использования или идея, где бы вы ее
использовали?
- Планируете ли вы использовать это?
- Понравилось, и хочешь показать свою поддержку?

Поделитесь своими мыслями об обсуждении [Badic API WICG
Discourse](https://discourse.wicg.io/t/badging-api-for-showing-an-indicator-on-a-web-apps-shelf-icon/2900)
.

{% include "web/_shared/helpful.html" %}

## Полезные ссылки {: #helpful }

- [Общественный
объяснитель](https://github.com/WICG/badging/blob/master/explainer.md)
- [Демо-версия Badging API](https://badging-api.glitch.me/) | [Демо исходник
API](https://glitch.com/edit/#!/badging-api?path=demo.js)
- [Ошибка
отслеживания](https://bugs.chromium.org/p/chromium/issues/detail?id=719176)
- [ChromeStatus.com
запись](https://www.chromestatus.com/features/6068482055602176)
- Запросить [пробный токен
происхождения](https://developers.chrome.com/origintrials/#/view_trial/1711367858400788481)
- [Как использовать пробный токен
происхождения](https://github.com/GoogleChrome/OriginTrials/blob/gh-pages/developer-guide.md#how-do-i-enable-an-experimental-feature-on-my-origin)
- Blink Компонент: `UI>Browser>WebAppInstalls`

{% include "web/_shared/rss-widget-updates.html" %}
