<html devsite><head>
  <title>Восстановление сайта после взлома с добавлением бессмысленного текста</title>
  <meta name="project_path" value="/web/fundamentals/_project.yaml"/>
  <meta name="book_path" value="/web/fundamentals/_book.yaml"/>
<meta name="devsite_continuous_localization_fp" value="wDLboSHSoOEqXBonRWn8UvxANYcQNA3KoE+YsYU0AtWHaYTDuDS8VMrRRGtvrq7FMcXWQdN5Hd3JAPNLQcUKrrvzQu5oWkLB+fiCoJN0cmrFt8cYhV7gL+hr3agSW6ztGwMwktYT4qx+ixSxJY26fg=="></meta><meta name="devsite_continuous_localization_translatable_html_file_type" value="source"></meta></head>
<body>

<p>В этом руководстве описывается тип взлома, при котором на сайт добавляются страницы с множественными вхождениями ключевых слов и большим количеством бессмысленного текста. Оно предназначено для тех, кто использует <a href="https://en.wikipedia.org/wiki/Web_content_management_system#Notable_web_CMS" l10n-encrypted-href="fDAavPipNi3L7oKW173OnAOrZfK8qSBsW73e1nANJzBUmOWztsjdEWYvTckdpiUrlx3KV5JDmfAX78Sj/1rTByEHYmzohOA6JH22pQy1iU4=">систему управления контентом</a>, однако может пригодиться и другим веб-мастерам.</p>

<p><strong>Примечание.</strong> Если вы не можете точно определить, взломан ли ваш сайт, прочитайте сначала <a href="/web/fundamentals/hacked/how_do_I_know_if_site_hacked">это руководство</a>.</p>

<aside class="note">Мы хотим знать, насколько полезной для вас была информация, представленная в этом руководстве. Чтобы мы могли улучшить его, <a href="https://docs.google.com/a/google.com/forms/d/12iF45BaZuEgwn29A7DOW73rd1Hi_7NiAHCFWB3zMu0U/viewform" l10n-encrypted-href="Y8CvmyoECzXwls/oZTNUPel6/rzBFIuQf3sSK+uodQZOqpR94XBJ+XibPywvk0+b9ezSGKvhi8xxpIK7uGXOCI2dMR8PtqMn9qLJh3QQBiqDN7SHduMZkPeGTm9uywje4+7KYcijq55wcC/P3SGriA==">отправьте нам свой отзыв</a>.</aside>

<h2>Оглавление</h2>

<ul>
<p></p><li><a href="#identifying" l10n-encrypted-href="i8ndmVX5d0ID8O9zoenvuw==">Этап 1. Идентификация этого типа взлома</a></li><p></p>
<p></p><li><a href="#fixing" l10n-encrypted-href="E7jyI6Rsf8GvIQvlRXlhig==">Этап 2. Устранение последствий</a></li><p></p>
<p></p><li><a href="#resources" l10n-encrypted-href="thupmU05Hk4T+qZrFSNMSw==">Этап 3. Дополнительные ресурсы</a></li><p></p>
<p></p><li><a href="/web/fundamentals/hacked/FAQs_for_hacked_sites">Часто задаваемые вопросы по взломанным сайтам</a></li><p></p>
</ul>

<a name="identifying"></a>
<h2>Идентификация этого типа взлома</h2>

<p>Бессмысленный текст. В процессе атаки автоматически создается большое количество страниц с бессмысленным текстом, содержащим множество ключевых слов, которые относятся к вашему сайту. Вы не создавали эти страницы, но их URL выглядят осмысленными и интересными для пользователей. Так хакеры добиваются того, чтобы эти страницы появились в результатах поиска Google. Когда пользователи открывают такие страницы, они перенаправляются на совершенно другие ресурсы, например сайты, предназначенные только для взрослых.
  За это хакеры получают деньги. Вот примеры URL, которые можно увидеть на сайте, подвергшемся такому взлому:</p>

  <ul>
    <li>www.example.com/modnyje-strizhki-makiyazh.html</li>
    <li>www.example.com/krasivyje-foto-peyzazhi.html</li>
    <li>www.example.com/krasivaya-muzyka-do-sljoz.php</li>
   </ul>

<p>Они могут находиться в папке с бессмысленным названием и содержать иностранные слова.</p>

   <ul>
   <li>www.example.com/jfwoea/cheap-hair-styles-cool.html</li>
   <li>www.example.com/jfwoea/free-pictures-fun.html</li>
   <li>www.example.com/jfwoea/www-ki-motn-dudh-photo.php</li>
   <li>www.example.com/jfwoea/foto-cewe-zaman-sekarang.php</li>
   </ul>

<p>Для начала с помощью инструмента <a href="https://www.google.com/webmasters/tools/security-issues" l10n-encrypted-href="wFaZwKx/FqCH4eQvAdZWPgSJUyK0ahq5p2Xo+yKO2LDoa3a6ko9L8TWTgkY4BqOep2DEtUsCy0Ve7mU772iG0Q==">Проблемы безопасности</a> в Search Console проверьте, нашел ли сканер Google такие взломанные страницы на вашем сайте. Иногда их можно обнаружить, если в окне Google Поиска ввести <code class="notranslate l10n-notranslate">site:<i>your site url</i></code> (после двоеточия укажите корневой URL своего веб-ресурса). Так вы увидите страницы сайта, которые проиндексированы Google, в том числе взломанные. Просмотрите несколько страниц с результатами поиска и проверьте, нет ли на них необычных URL. Если в Google Поиске взломанных страниц не обнаружилось, используйте те же запросы в другой поисковой системе. Вот несколько примеров таких URL:</p>


<img src="/web/fundamentals/security/hacked/images/GibberishKeywordHackExampleSearch.png" style="padding:0px 25px">

<div class="tip">Обратите внимание, что в этих результатах поиска есть страницы, созданные не владельцем сайта. Просмотрев описания, можно заметить бессмысленный текст.</div>

<p>Обычно, если перейти по ссылке, ведущей на взломанную страницу, выполняется переадресация на другой сайт или открывается страница с бессмысленным содержанием. Также может появиться сообщение о том, что страница не существует (например, ошибка 404). Однако это может не соответствовать действительности: хакеры вводят пользователей в заблуждение, создавая впечатление, что взломанная страница исчезла или работает нормально. Это делается с помощью <a href="/webmasters/answer/66355" l10n-encrypted-href="uDM31iN8CLdSvuKmuk5DvFAVB44doULc4CE9XvK9iII=">маскировки</a> контента. Чтобы выявить маскировку, введите URL страниц своего сайта в инструменте <a href="https://www.google.com/webmasters/tools/googlebot-fetch" l10n-encrypted-href="wFaZwKx/FqCH4eQvAdZWPgSJUyK0ahq5p2Xo+yKO2LAiz85uaQL1OSHmh9ZlIHN5PBF3nzIP4FICVwj1Kz6IHg==">Просмотреть как Googlebot</a>. Он позволяет увидеть ту или иную страницу так, как ее видит робот Google. </p>

<p>Если вы обнаружили перечисленные выше нарушения, вероятно, ваш сайт подвергся взлому такого типа.</p>

<a name="fixing"></a>
<h2>Устранение последствий</h2>

<p>Прежде чем начать, сделайте копии всех файлов, которые вы собираетесь удалить: возможно, вам понадобится восстановить их позже. Оптимальный вариант – создать резервную копию всего сайта.
  Для этого можно сохранить все файлы с сервера на локальном компьютере или воспользоваться средствами системы управления контентом, с которой вы работаете.</p>

<h3>Проверка файла htaccess (2 этапа)</h3>

<p>Страницы, подвергшиеся взлому такого типа, перенаправляют пользователей на другие сайты с помощью файла htaccess.</p>

<p><b>Этап 1</b></p>
<p>Найдите на своем сайте файл htaccess. Если вы не знаете, где он находится, и используете платформу для создания сайтов (например, WordPress, Joomla или Drupal), в поисковой системе введите запрос "как найти файл htaccess" и укажите название платформы. Учтите, что таких файлов может быть несколько.
  Составьте список путей ко всем файлам htaccess.</p>

<p><strong>Примечание.</strong> Файлы htaccess часто бывают скрытыми. При поиске убедитесь, что они отображаются.</p>

<p><b>Этап 2</b></p>
<p>Замените все файлы htaccess исходной или стандартной версией. Чтобы найти ее, введите в поисковой системе запрос "файл htaccess по умолчанию" и название платформы, на которой размещен ваш сайт. Если файлов htaccess несколько, вам нужно найти исходную версию каждого из них и заменить ею поврежденные файлы.</p>

<p>Если файла htaccess по умолчанию нет и вы никогда не создавали его для сайта, значит найденный на сайте файл htaccess, скорее всего, создан хакерами. Сохраните копию файлов htaccess на всякий случай на локальном компьютере и удалите их с сайта.</p>

<h3>Поиск и удаление других вредоносных файлов (5 этапов)</h3>

<p>Выявление вредоносных файлов может оказаться сложным и занять несколько часов. Во время проверки файлов не спешите. Не забудьте создать их резервные копии. Чтобы узнать, как это сделать, введите в Google поисковый запрос "резервная копия сайта" и укажите название платформы, на которой размещен ваш веб-ресурс.</p>

<p><b>Этап 1</b></p>
<p>Если вы используете систему управления контентом (CMS), переустановите все основные файлы, которые применяются в ней, а также файлы, добавленные вами (темы, модули, плагины и т. д.). Таким образом вы избавитесь от взломанного контента. Чтобы узнать, как это сделать, введите в Google поисковый запрос "переустановка" и укажите название своей CMS. Если у вас есть плагины, модули, расширения или темы, обязательно переустановите их.</p>

<p>Переустановка основных файлов может привести к потере ваших настроек. Поэтому обязательно создайте резервную копию своей базы данных и всех файлов.</p>

<p><b>Этап 2</b></p>
<p>Теперь вам нужно найти оставшиеся вредоносные или взломанные файлы. Это самая сложная и трудоемкая часть процесса, но после нее вам останется выполнить всего несколько простых действий.</p>

<p>На сайтах, подвергшихся такому взлому, обычно остаются файлы двух типов: TXT и PHP. Первые выполняют роль шаблонов, а вторые определяют, какой бессмысленный контент будет загружен на ваш сайт. Начните с поиска файлов TXT. На вашем сервере должна быть система поиска файлов сайта. Найдите все файлы с расширением TXT. Среди них будут обычные файлы с лицензионным соглашением, инструкциями и т. д. Однако вам нужны файлы TXT с HTML-кодом, который применяется для создания шаблонов со спамом. Ниже приведены фрагменты кода, которые можно найти в таких вредоносных файлах TXT.</p><p>

</p><p>Хакеры заменяют ключевые слова для создания страниц со спамом. Скорее всего, вы увидите общее слово, которое можно заменить во всем взломанном файле.</p>

<pre class="notranslate l10n-notranslate prettyprint">
  &lt;title&gt;{keyword}&lt;/title&gt;
  &lt;meta name="description" content="{keyword}" /&gt;
  &lt;meta name="keywords" content="{keyword}" /&gt;
  &lt;meta property="og:title" content="{keyword}" /&gt;
</pre>

<p>Кроме того, в большинстве этих файлов есть код, который смещает ссылки и текст со спамом за пределы видимой части страницы.</p>

<pre class="notranslate l10n-notranslate prettyprint">
  &lt;div style="position: absolute; top: -1000px; left: -1000px;"&gt;
  Cheap prescription drugs
  &lt;/div&gt;
</pre>

<p>Удалите эти файлы TXT. Если все они находятся в одной папке, можно удалить всю папку.</p>

<p><b>Этап 3</b></p>
<p>Найти вредоносные файлы PHP немного сложнее. Их на сайте может быть несколько. Они могут находиться в одном подкаталоге или в разных.</p>

<p>Не беспокойтесь: вам не нужно открывать и просматривать каждый файл PHP. Для начала создайте список подозрительных файлов с этим расширением, которые нужно проверить. Ниже описано, как определить такие файлы.</p>

<ul>
<li>Поскольку вы уже перезагрузили файлы системы управления контентом, проверяйте только те файлы и папки, которые не использовались у вас по умолчанию. Таким образом можно исключить большую часть файлов PHP и оставить для анализа только некоторые из них.</li>
<li>Отсортируйте файлы сайта по дате изменения. Ищите те, которые были изменены в течение нескольких месяцев после взлома сайта.</li>
<li>Отсортируйте файлы на сайте по размеру. Ищите файлы подозрительно большого размера.</li>
</ul>

<p><b>Этап 4</b></p>
<p>Составив список подозрительных файлов PHP, убедитесь, что они не взломаны. Если вы не знакомы с PHP, это процесс может оказаться трудоемким. Поэтому предлагаем вам изучить <a href="https://php.net/docs.php">документацию</a> по этому языку.  Но даже если вы совершенно незнакомы с программированием, вы можете найти базовые шаблоны, которые используются во вредоносных файлах.</p>

<p>Сначала в составленном вами списке подозрительных файлов найдите большие блоки текста с бессмысленным набором букв и цифр. Таким блокам обычно предшествуют функции PHP, например base64_decode, rot13, eval, strrev, gzinflate. Ниже приведен пример такого кода. Он может не содержать пробелов и переноса строки (благодаря этому он кажется короче, чем есть на самом деле).</p>

<p></p>

<pre class="notranslate l10n-notranslate prettyprint">
&lt;!--Hackers try to confuse webmasters by encoding malicious code into blocks
of texts. Be wary of unfamiliar code blocks like this.--&gt;

base64_decode(strrev("hMXZpRXaslmYhJXZuxWd2BSZ0l2cgknbhByZul2czVmckRWYgknYgM3ajFGd0FGIlJXd0VnZgk
nbhBSbvJnZgUGdpNHIyV3b5BSZyV3YlNHIvRHI0V2Zy9mZgQ3Ju9GRg4SZ0l2cgIXdvlHI4lmZg4WYjBSdvlHIsU2chVmcnBydv
JGblBiZvBCdpJGIhBCZuFGIl1Wa0BCa0l2dgQXdCBiLkJXYoBSZiBibhNGIlR2bjBycphGdgcmbpRXYjNXdmJ2blRGI5xWZ0Fmb
1RncvZmbVBiLn5WauVGcwFGagM3J0FGa3BCZuFGdzJXZk5Wdg8GdgU3b5BicvZGI0xWdjlmZmlGZgQXagU2ah1GIvRHIzlGa0B
SZrlGbgUGZvNGIlRWaoByb0BSZrlGbgMnclt2YhhEIuUGZvNGIlxmYhRWYlJnb1BychByZulGZhJXZ1F3ch1GIlR2bjBCZlRXY
jNXdmJ2bgMXdvl2YpxWYtBiZvBSZjVWawBSYgMXagMXaoRFIskGS"));
</pre>


<p>Иногда код выглядит как обычный скрипт и не содержит бессмысленных наборов символов. Если вы не знаете, взломан ли код, попросите помощи у специалистов на <a href="http://productforums.google.com/forum/#    !forum/webmasters" l10n-encrypted-href="eFqttkEJXOrPtYqL1dS4hMlzk68vmg1gLAq//4NlIesuA+SSwS44WzEss142F1VLcbCLWvVm2pEwqt29pdWwH6rz+M3RfOj6o9TWwqB6UaE=">справочном форуме для веб-мастеров</a>.</p>

<p><b>Этап 5</b></p>
<p>Выявив подозрительные файлы, сохраните их резервную или локальную копию на своем компьютере на случай, если они окажутся не вредоносными, и удалите эти файлы с сайта.</p>

<h3>Убедитесь, что на сайте нет вредоносных файлов</h3>

<p>Удалив взломанные файлы, убедитесь, что все последствия хакерской атаки устранены. С помощью инструмента "Просмотреть как Googlebot" снова проверьте, есть ли на сайте найденные вами ранее страницы с бессмысленным текстом. Если вы видите статус "Не найдено", это с большой вероятностью означает, что всё в порядке.</p>

<p>Также проверить наличие взломанного контента на сайте можно, следуя <a href="https://support.google.com/webmasters/troubleshooter/6155978" l10n-encrypted-href="L9cotzWz1Gz2EXZ4cybZUF8/1IcWIMZShUywi8+OFhFaf4PNa8lHkLSIkkiloXraU+YkdKmDgr9qSLhT4Aj5jg==">этим инструкциям</a>.</p>

<h3>Как предотвратить повторный взлом?</h3>

<p>Устранение уязвимостей на сайте – важный заключительный этап работы. Недавнее исследование показало, что 20% взломанных сайтов снова подвергаются атаке в течение суток. Прежде всего вам нужно понять, как именно был взломан сайт. Начните с изучения <a href="/web/fundamentals/security/hacked/top_ways_websites_get_hacked_by_spammers">этого руководства</a>. Если прояснить ситуацию не удалось, выполняйте действия, перечисленные в контрольном списке ниже.</p>

<ul>
  <li><strong>Регулярно сканируйте свой компьютер.</strong> Для поиска уязвимостей и вредоносных программ используйте любой популярный антивирус.</li>
<li><strong>Регулярно меняйте свои пароли.</strong> Периодическое изменение паролей к аккаунтам провайдера, FTP, системе управления контентом и т. д. снижает вероятность несанкционированного доступа к сайту. Пароль для каждого аккаунта должен быть надежным и уникальным.</li>
<li><strong>Используйте <a href="https://en.wikipedia.org/wiki/Two-factor_authentication" l10n-encrypted-href="9xQhRBOSn9SmNcpVG2sojwOrZfK8qSBsW73e1nANJzDifCX+gGFDlLulOI0L7gbBir3zffj4Scth1kJJ0GCu7g==">двухфакторную аутентификацию</a></strong> везде, где это возможно: она усложнит проникновение для хакеров, даже если они украдут ваш пароль.</li>
<li><strong>Регулярно обновляйте систему управления контентом, плагины, расширения и модули.</strong> Часто причиной взлома становится устаревшее программное обеспечение, на котором работает сайт. В некоторых системах управления контентом обновление выполняется автоматически.</li>
<li><strong>Система обеспечения веб-безопасности.</strong> Есть немало надежных сервисов, которые помогут вам уберечь сайт от взлома.
  Воспользуйтесь их услугами.</li>
</ul>

<a name="resources"></a>
<h2>Дополнительные ресурсы</h2>
<p>Если вам по-прежнему не удается устранить проблемы на сайте, воспользуйтесь дополнительными ресурсами.</p>

<p>Эти инструменты просканируют ваш сайт и помогут найти проблемный контент. Google не связан ни с одним из них, кроме VirusTotal.</p>

<p>Вот несколько таких сервисов: <a href="https://www.virustotal.com/" l10n-encrypted-href="+yh4nIlcln/5B9bKgkfEGM782VG+rd3m0a4VL0AU26M=">Virus Total</a>, <a href="https://aw-snap.info/">Aw-snap.info</a>, <a href="https://sitecheck.sucuri.net/" l10n-encrypted-href="onZPCmFW+G106sKkIlw02x6VPeWQ/7qXNFWdb9FQ4feq8/jN0Xzo+qPU1sKgelGh">Sucuri Site Check</a>, <a href="https://www.quttera.com/">Quttera</a>. Обратите внимание, что проверка этими сканерами не является абсолютной гарантией удаления проблемного контента.</p>

<p>Другие ресурсы Google, которые помогут вам устранить проблему:</p>

<ul>
<li><a href="//support.google.com/webmasters/go/community" l10n-encrypted-href="+MnmPhXLuMxD2VLFLngQ0KArGd6SuOrIdKNhJ8TAfI9k4yrci9ag38FePALAXcE0">Справочный форум для веб-мастеров
  </a></li>
<li><a href="/web/fundamentals/security/hacked/">Помощь по восстановлению взломанных сайтов</a></li>
<li><a href="//safebrowsing.google.com/" l10n-encrypted-href="1ZOZ2H6Eo250Va95oXrumTbQA6KByQU0uWZ6m4BBYCY=">Google SafeBrowsing</a></li>
</ul>

<div class="alert">Отсутствует инструмент, который, по вашему мнению, может быть полезен? <a href="https://docs.google.com/a  /google.com/forms/d/12iF45BaZuEgwn29A7DOW73rd1Hi_7NiAHCFWB3zMu0U/viewform" l10n-encrypted-href="voYeKygemXxQpSsj4TC5AZV1HFx+9thIM0C4UiCOHzc03KC6nJ7AyWMICIX6+KL/rhrEkO/djoguK4tnJcrqXJ+wsE+tFKLdRQjytTrchinkpeA/GFKTKj/6rHbJmOv3qwUI9b2ZthvPFzCvc6kgQQ==">Сообщите нам об этом</a>.</div>



</body></html>
