<html devsite><head>
  <title>Восстановление сайта после взлома с добавлением японских ключевых слов</title>
  <meta name="project_path" value="/web/fundamentals/_project.yaml"/>
  <meta name="book_path" value="/web/fundamentals/_book.yaml"/>
<meta name="devsite_continuous_localization_fp" value="DGV7xNragN9HZ8y5MSlU2fxANYcQNA3KoE+YsYU0AtWHaYTDuDS8VMrRRGtvrq7FMcXWQdN5Hd3JAPNLQcUKrrvzQu5oWkLB+fiCoJN0cmoailNK2BnFK9vo6D7ZUkV7Qcmve4gLC1dniNzb2FV146rz+M3RfOj6o9TWwqB6UaE="></meta><meta name="devsite_continuous_localization_translatable_html_file_type" value="source"></meta></head>

<body>

<p>В этом руководстве описывается тип взлома, при котором на сайт добавляются автоматически созданные страницы с текстом на японском языке. Оно предназначено для тех, кто использует <a href="https://en.wikipedia.org/wiki/Web_content_management_system#Notable_web_CMS" l10n-encrypted-href="fDAavPipNi3L7oKW173OnAOrZfK8qSBsW73e1nANJzBUmOWztsjdEWYvTckdpiUrlx3KV5JDmfAX78Sj/1rTByEHYmzohOA6JH22pQy1iU4=">систему управления контентом</a>, однако может пригодиться и другим веб-мастерам.</p>

<p><strong>Примечание.</strong> Если вы не можете точно определить, взломан ли ваш сайт, прочитайте сначала <a href="/web/fundamentals/security/hacked/how_do_I_know_if_site_hacked">это руководство</a>.</p>

<aside class="note">Мы хотим знать, насколько полезной для вас была информация, представленная в этом руководстве. Чтобы мы могли улучшить его, <a href="https://docs.google.com/a/google.com/forms/d/12iF45BaZuEgwn29A7DOW73rd1Hi_7NiAHCFWB3zMu0U/viewform" l10n-encrypted-href="Y8CvmyoECzXwls/oZTNUPel6/rzBFIuQf3sSK+uodQZOqpR94XBJ+XibPywvk0+b9ezSGKvhi8xxpIK7uGXOCI2dMR8PtqMn9qLJh3QQBiqDN7SHduMZkPeGTm9uywje4+7KYcijq55wcC/P3SGriA==">отправьте нам свой отзыв</a>.</aside>

<h2>Оглавление</h2>

<ul>
  <li><a href="#identifying" l10n-encrypted-href="i8ndmVX5d0ID8O9zoenvuw==">Шаг 1. Идентификация этого типа взлома</a></li>
  <li><a href="#fixing" l10n-encrypted-href="E7jyI6Rsf8GvIQvlRXlhig==">Шаг 2. Устранение последствий</a></li>
  <li><a href="#resources" l10n-encrypted-href="thupmU05Hk4T+qZrFSNMSw==">Шаг 3: Дополнительные ресурсы</a></li>
  <li><a href="/web/fundamentals/security/hacked/FAQs_for_hacked_sites">Часто задаваемые вопросы по взломанным сайтам</a></li>
</ul>

<a name="identifying"></a>
  <h2>Идентификация этого типа взлома</h2>

<p>Главный признак – японские ключевые слова. После атаки такого типа на сайте обычно создаются каталоги с бессмысленными названиями. В них добавляются страницы с текстом на японском языке. Вот пример такой страницы:</p>

<img src="/web/fundamentals/security/hacked/images/JapaneseKeywordHackExamplePage.png" style="padding:0px 25px">

<p>При этом хакер нередко указывает в Search Console, что является владельцем ресурса, чтобы увеличить доход, изменяя различные настройки сайта (геотаргетинг, карты сайта и др.). Если вы получили оповещение, что кто-то подтвердил ваш сайт в <a href="https://www.google.com/webmasters/tools/" l10n-encrypted-href="bnkUt+0jxHW5UePwiMjGHgSJUyK0ahq5p2Xo+yKO2LCoVUPePn2BCeqpvFwYJx5q">Search Console</a>, это с высокой долей вероятности означает, что ваш ресурс взломан.</p>

<p>Для начала с помощью инструмента <a href="https://www.google.com/webmasters/tools/security-issues" l10n-encrypted-href="wFaZwKx/FqCH4eQvAdZWPgSJUyK0ahq5p2Xo+yKO2LDoa3a6ko9L8TWTgkY4BqOep2DEtUsCy0Ve7mU772iG0Q==">Проблемы безопасности</a> в Search Console проверьте, обнаружил ли сканер Google такие взломанные страницы на вашем сайте. Иногда их можно найти, если в окне Google Поиска ввести <code class="notranslate l10n-notranslate">site:[your site root URL]</code> (после двоеточия укажите корневой URL своего веб-ресурса). Так вы увидите страницы сайта, которые проиндексированы Google, в том числе взломанные. Просмотрите несколько страниц с результатами поиска и проверьте, нет ли на них необычных URL. Если в Google Поиске взломанных страниц не обнаружилось, используйте те же запросы в другой поисковой системе. Другие поисковые системы могут показать взломанный контент, который удален из индекса Google. Вот несколько примеров таких URL:</p>

<img src="/web/fundamentals/security/hacked/images/JapaneseKeywordHackExampleSearch.png" style="padding:0px 25px">

<p>Обратите внимание, что в этих результатах поиска есть страницы, созданные не владельцем сайта. Просмотрев описания, можно заметить текст на японском языке.</p>

<p>Также может появиться сообщение о том, что страница не существует (например, ошибка 404). Однако это может не соответствовать действительности: хакеры вводят пользователей в заблуждение, создавая впечатление, что взломанная страница исчезла или работает нормально.
  Это делается с помощью <a href="https://support.google.com/webmasters/answer/66355" l10n-encrypted-href="5TGqX3BGnR1wDX3q2UuoUl8/1IcWIMZShUywi8+OFhGczDdT//DB7d2bh+zxFqausFnRYfcPdJtT7j/7LC0qWg==">маскировки</a> контента. Чтобы выявить маскировку, введите URL страниц своего сайта в инструменте <a href="https://www.google.com/webmasters/tools/googlebot-fetch" l10n-encrypted-href="wFaZwKx/FqCH4eQvAdZWPgSJUyK0ahq5p2Xo+yKO2LAiz85uaQL1OSHmh9ZlIHN5PBF3nzIP4FICVwj1Kz6IHg==">Просмотреть как Googlebot</a>.
  Он позволяет увидеть ту или иную страницу так, как ее видит робот Google.</p>

<a name="fixing"></a>
  <h2>Устранение последствий</h2>
<p>Прежде чем начать, сделайте копии всех файлов, которые вы собираетесь удалить: возможно, вам понадобится восстановить их позже. Оптимальный вариант – создать резервную копию всего сайта. Для этого можно сохранить все файлы с сервера на своем компьютере или воспользоваться средствами системы управления контентом, с которой вы работаете. Если вы используете систему управления контентом, также нужно создать резервную копию базы данных.</p>

  <h3>Удаление вновь созданных аккаунтов из Search Console</h3>
<p>Если в ваш аккаунт Search Console добавлен новый владелец, которого вы не знаете, как можно скорее заблокируйте его. Узнать, какие пользователи подтверждены для вашего сайта, можно в <a href="https://www.google.com/webmasters/verification" l10n-encrypted-href="w+/AxGxgV5VhCAsoJueEswSJUyK0ahq5p2Xo+yKO2LBRkz9eV7ohMxFBbvqnrm26jlSneBdGNunDHPmxSA8Tjw==">Центре веб-мастеров</a>. Нажмите на ссылку "Сведения о подтверждении", чтобы посмотреть всех подтвержденных пользователей.</p>

<p>Узнайте, <a href="https://support.google.com/webmasters/answer/2453966" l10n-encrypted-href="h8KunduxzUQTzb6KfNx3KV8/1IcWIMZShUywi8+OFhGczDdT//DB7d2bh+zxFqauvOHSfE0UitWWNywfgF9JeA==">как удалить владельца из Search Console</a>.
  Вам нужно удалить связанный токен подтверждения. Как правило, это либо файл HTML в корневом каталоге сайта, либо динамически сгенерированный файл .htaccess, похожий на файл HTML.</p>

<p>Если вы не можете найти HTML-токен подтверждения на своем сайте, проверьте правило перезаписи в файле .htaccess. Оно выглядит примерно так:</p>

<pre class="notranslate l10n-notranslate prettyprint">
  RewriteEngine On
  RewriteRule ^google(.*)\.html$ dir/file.php?google=$1 [L] </pre>

<p><b>Примечание.</b> Обычно, чтобы проверить, удален ли динамически созданный токен подтверждения, нужно перейти на имитацию файла по адресу, который имеет такую структуру: <code class="notranslate l10n-notranslate">wwww.example.com/google[random number and letters].html</code> (в квадратных скобках могут быть произвольные буквы и цифры).
  Например, если ваш сайт www.brandonsbaseballcards.com, попробуйте перейти на страницу www.brandonsbaseballcards.com/google1234.html.
  Если она возвращает код ошибки HTTP 404, то динамически созданный токен подтверждения, вероятно, удален.</p>

<p>Чтобы удалить динамически созданный токен подтверждения из файла .htaccess, выполните действия, описанные ниже.

  </p><h3>Проверка файла .htaccess (2 этапа)</h3>
<p>Для создания динамических токенов подтверждения хакеры, помимо файла .htaccess, часто используют правила перенаправления пользователей или добавления страниц со спамом в виде бессмысленного текста. Если в файле .htaccess у вас нет собственных правил, попробуйте заменить его новым файлом.</p>

  <strong>Этап 1</strong>
<p>Найдите на своем сайте файл .htaccess. Если вы не знаете, где он находится, и используете платформу для создания сайтов (например, WordPress, Joomla или Drupal), в поисковой системе введите запрос "как найти файл .htaccess" и укажите название платформы. Учтите, что таких файлов может быть несколько. Составьте список путей ко всем файлам .htaccess.</p>

  <strong>Этап 2</strong>
<p>Замените все файлы .htaccess исходной или стандартной версией. Чтобы найти ее, введите в поисковой системе запрос "файл .htaccess по умолчанию" и название платформы, на которой размещен ваш сайт.</p>

<p><strong>Примечание.</strong> Файлы .htaccess часто бывают скрытыми. При поиске убедитесь, что они отображаются.</p>

  <h3>Удалите все вредоносные файлы и скрипты (4 этапа)</h3>
<p>Выявление вредоносных файлов может оказаться сложным и занять несколько часов.
  Во время проверки файлов не спешите. Не забудьте создать их резервные копии. Чтобы узнать, как это сделать, введите в Google поисковый запрос "резервная копия сайта" и укажите название платформы, на которой размещен ваш веб-ресурс.</p>

  <strong>Этап 1</strong>
<p>Если вы используете платформу для создания сайтов, переустановите все основные файлы, которые применяются в ней. Таким образом вы избавитесь от взломанного контента. Чтобы узнать, как это сделать, введите в Google поисковый запрос "переустановка" и укажите название платформы, на которой размещен ваш веб-ресурс. Если у вас есть плагины, модули, расширения или темы, обязательно переустановите их.</p>

<p>Переустановка основных файлов может привести к потере ваших настроек. Поэтому обязательно создайте резервную копию своей базы данных и всех файлов.</p>

  <strong>Этап 2</strong>
<p>Хакеры часто меняют карту сайта или добавляют новые файлы Sitemap, чтобы ускорить индексацию URL страниц. Если у вас уже был файл Sitemap, проверьте его на наличие подозрительных ссылок и удалите их. Если вы обнаружили файлы Sitemap, которые вы не добавляли, внимательно проверьте их и удалите, если они содержат только ссылки на спам.</p>

  <strong>Этап 3</strong>
<p>Проверьте, не осталось ли вредоносных или взломанных файлов. Возможно, вы уже удалили их на предыдущих этапах. Однако рекомендуется выполнить описанные ниже действия на случай, если вы что-то пропустили.</p>

<p>Не беспокойтесь: вам не нужно открывать и просматривать каждый файл PHP. Для начала создайте список подозрительных файлов с этим расширением, которые нужно проверить. Ниже описано, как определить такие файлы.</p>
   <ul>
    <li>Поскольку вы уже перезагрузили файлы системы управления контентом, проверяйте только те файлы и папки, которые не использовались у вас по умолчанию. Таким образом можно исключить большую часть файлов PHP и оставить для анализа только некоторые из них.</li>
    <li>Отсортируйте файлы сайта по дате изменения. Ищите те, которые были изменены в течение нескольких месяцев после взлома сайта.</li>
    <li>Отсортируйте файлы на сайте по размеру. Ищите файлы подозрительно большого размера.</li>
  </ul>

<p><strong>Примечание.</strong> Хакеры обычно добавляют скрипты в следующие файлы: index.php, wp-load.php, 404.php и view.php.</p>

  <strong>Этап 4</strong>
<p>Составив список подозрительных файлов PHP, убедитесь, что они не взломаны. Если вы не знакомы с PHP, этот процесс может оказаться трудоемким. Предлагаем изучить <a href="https://php.net/docs.php">документацию</a> по этому языку.
  Если вы совершенно не разбираетесь в программировании, <a href="/web/fundamentals/security/hacked/support_team">обратитесь за помощью</a>. Но даже в этом случае вы можете найти базовые шаблоны, которые используются во вредоносных файлах.</p>

<p>Если вы используете систему управления контентом и обычно не редактируете эти файлы напрямую, сравните файлы на своем сервере со списком файлов, используемых в вашей системе по умолчанию. Выполните такое сравнение для плагинов и тем. Ищите отсутствующие файлы или файлы большего, чем обычно, размера.</p>

<p>Проверьте выявленные подозрительные файлы на наличие блоков с запутанным кодом. Он выглядит как бессмысленный набор букв и цифр. Таким блокам обычно предшествуют функции PHP, например base64_decode, rot13, eval, strrev, gzinflate. Ниже приведен пример такого кода. Он может не содержать пробелов и переноса строки (благодаря этому он кажется короче, чем есть на самом деле).</p>

<pre class="notranslate l10n-notranslate prettyprint">
  $O_O0O_O0_0=urldecode("%6E1%7A%62%2F%6D%615%5C%76%740%6928%2D%70
  %78%75%71%79%2A6%6C%72%6B%64%679%5F%65%68%63%73%77%6F4%2B%6637%6A");
  $OO0_0OO0__=$O_O0O_O0_0{26}.$O_O0O_O0_0{6}.$O_O0O_O0_0{10}.$O_O0O_O0_0{30}</pre>

  <h3>Убедитесь, что на сайте нет вредоносных файлов</h3>
<p>Удалив взломанные файлы, убедитесь, что на сайте не осталось следов взлома. С помощью инструмента "Просмотреть как Googlebot" снова проверьте, есть ли на сайте найденные вами ранее страницы с бессмысленным текстом. Если вы видите статус "Не найдено", это с большой вероятностью означает, что все в порядке.</p>

<p>Также проверить наличие взломанного контента на сайте можно, следуя <a href="https://support.google.com/webmasters/troubleshooter/6155978" l10n-encrypted-href="L9cotzWz1Gz2EXZ4cybZUF8/1IcWIMZShUywi8+OFhFaf4PNa8lHkLSIkkiloXraU+YkdKmDgr9qSLhT4Aj5jg==">этим инструкциям</a>.</p>

  <h3>Как предотвратить повторный взлом?</h3>
<p>Устранение уязвимостей на сайте – важный заключительный этап работы. <a href="https://security.googleblog.com/2016/04/helping-webmasters-re-secure-their-sites.html" l10n-encrypted-href="HaoVnhrvp1ipt6jkrRLULkQg8+fqoPqLZVbZwHZzVSGEbm/ALd8tKcGkbG0DXJPH9mJYV+4aaiZf3CtTQGk0SoAD8yPFagwfQx1QvJaFoc6lviyJWslHwkLxMOd1ngrY">Недавнее исследование</a> показало, что 12% взломанных сайтов снова подвергаются атаке в течение 30 дней. Прежде всего вам нужно понять, как именно был взломан ваш сайт. Начните с изучения <a href="/web/fundamentals/security/hacked/top_ways_websites_get_hacked_by_spammers">этого руководства</a>. Если прояснить ситуацию не удалось, выполняйте действия, перечисленные в контрольном списке ниже.</p>
  <ul>
    <li><strong>Регулярно сканируйте свой компьютер.</strong> Для поиска уязвимостей и вредоносных программ используйте надежное антивирусное ПО.</li>
    <li><strong>Регулярно меняйте свои пароли.</strong> Периодическое изменение паролей к аккаунтам провайдера, FTP, системе управления контентом и т. д. снижает вероятность несанкционированного доступа к сайту. Пароль для каждого аккаунта должен быть надежным и уникальным.</li>
    <li><strong>Используйте <a href="https://ru.wikipedia.org/wiki/%D0%9C%D0%BD%D0%BE%D0%B3%D0%BE%D1%84%D0%B0%D0%BA%D1%82%D0%BE%D1%80%D0%BD%D0%B0%D1%8F_%D0%B0%D1%83%D1%82%D0%B5%D0%BD%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D1%8F" l10n-encrypted-href="9xQhRBOSn9SmNcpVG2sojwOrZfK8qSBsW73e1nANJzDifCX+gGFDlLulOI0L7gbBir3zffj4Scth1kJJ0GCu7g==">двухфакторную аутентификацию</a></strong> везде, где это возможно: она усложнит проникновение для хакеров, даже если они украдут ваш пароль.</li>
    <li><strong>Регулярно обновляйте систему управления контентом, плагины, расширения и модули.</strong> Часто причиной взлома становится устаревшее программное обеспечение, на котором работает сайт. В некоторых системах управления контентом обновление выполняется автоматически.</li>
    <li><strong>Система обеспечения веб-безопасности.</strong> Есть немало надежных сервисов, которые помогут вам уберечь сайт от взлома. Воспользуйтесь их услугами.</li>
  </ul>


<a name="resources"></a>
  <h2>Дополнительные ресурсы</h2>
<p>Если вам по-прежнему не удается устранить проблемы на сайте, воспользуйтесь дополнительными ресурсами.</p>

<p>Эти инструменты просканируют ваш сайт и помогут найти проблемный контент.
  Google не связан ни с одним из них, кроме VirusTotal.</p>

<p>Вот несколько таких сервисов: <a href="https://www.virustotal.com/" l10n-encrypted-href="+yh4nIlcln/5B9bKgkfEGM782VG+rd3m0a4VL0AU26M=">Virus Total</a>, <a href="https://aw-snap.info/">Aw-snap.info</a>, <a href="https://sitecheck.sucuri.net/" l10n-encrypted-href="onZPCmFW+G106sKkIlw02x6VPeWQ/7qXNFWdb9FQ4feq8/jN0Xzo+qPU1sKgelGh">Sucuri Site Check</a>, <a href="https://www.quttera.com/">Quttera</a>. Обратите внимание, что проверка этими сканерами не является абсолютной гарантией удаления проблемного контента.</p>

<p>Другие ресурсы Google, которые помогут вам устранить проблему:</p>

<ul>
<li><a href="//support.google.com/webmasters/go/community" l10n-encrypted-href="+MnmPhXLuMxD2VLFLngQ0KArGd6SuOrIdKNhJ8TAfI9k4yrci9ag38FePALAXcE0">
  Справочный форум для веб-мастеров</a></li>
<li><a href="/web/fundamentals/security/hacked/">Помощь по восстановлению взломанных сайтов</a></li>
<li><a href="//safebrowsing.google.com/" l10n-encrypted-href="1ZOZ2H6Eo250Va95oXrumTbQA6KByQU0uWZ6m4BBYCY=">Google SafeBrowsing</a></li>
</ul>






</body></html>
