project_path: /web/_project.yaml
book_path: /web/fundamentals/_book.yaml
description: Большинство интернет-ресурсов не оптимизировано для просмотра на разных типах устройств. Изучив основы, вы узнаете, как обеспечить одинаково хорошую работу сайта на телефонах, планшетах, домашних компьютерах... в общем, на любых устройствах, у которых есть экран.

{# wf_updated_on: 2014-04-29 #}
{# wf_published_on: 2000-01-01 #}

# Основы отзывчивого веб-дизайна {: .page-title }

{% include "web/_shared/contributors/petelepage.html" %}


Число пользователей, выходящих в Интернет с мобильных устройств, стремительно растет, но, к сожалению, большинство сетевых ресурсов не приспособлено для этого. Для каждого мобильного устройства необходим особый подход к расположению контента на экране из-за ограниченного размера дисплея.



{% include "web/_shared/udacity/ud893.html" %}


<div class="clearfix"></div>


Существует множество различных устройств с экранами всевозможных размеров: телефоны, `фаблеты`, планшетные и домашние ПК, игровые консоли, телевизоры и даже электронные аксессуары, которые можно носить прямо на себе.  Размеры экранов постоянно меняются, поэтому важно, чтобы сайт мог адаптироваться к любому из них - не только сейчас, но и в будущем.


  <video autoplay loop controls class="responsiveVideo">
    <source src="videos/resize.webm" type="video/webm">
    <source src="videos/resize.mp4" type="video/mp4">
  </video>


Об отзывчивом веб-дизайне впервые написал [Итан Маркотт в статье журнала A List Apart](http://alistapart.com/article/responsive-web-design/). Это именно то, чего так не хватало устройствам и их пользователям.  Макет подстраивается под устройство, исходя из его возможностей и размера.  К примеру, определенный контент на телефоне располагается в одной колонке, а на планшете - в двух.


## Настройка области просмотра

Страницы, адаптированные для просмотра на разных устройствах, должны содержать в контейнере head метатег viewport.  Он сообщает браузеру, каким образом нужно контролировать размеры и масштаб страницы.




### TL;DR {: .hide-from-toc }
- Чтобы контролировать масштабирование окна просмотра в браузере, используйте метатег viewport.
- Добавьте <code>width=device-width</code>, чтобы адаптировать ширину окна просмотра к экрану устройства.
- Вставьте <code>initial-scale=1</code>, чтобы обеспечить соотношение 1:1 между пикселями CSS и независимыми пикселями устройства.
- Чтобы страница была доступна, проверьте, не отключено ли пользовательское масштабирование.


Пытаясь улучшить работу с сайтами, мобильные браузеры отображают страницу·той же ширины, что и на экране ПК (обычно она составляет около 980 пикселей, но на разных устройствах может отличаться). После этого браузер увеличивает размер шрифтов и изменяет размер контента, чтобы уместить страницу на экране.  В результате пользователи видят разные шрифты, и для работы с сайтом им приходится увеличивать его масштаб.


    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    


Чтобы страница подстроилась под ширину нужного экрана (в независимых пикселях), используйте метатег viewport `width=device-width`. С его помощью размер и положение контента изменятся, и сайт будет хорошо смотреться на любом устройстве.

<img src="imgs/no-vp.png" class="attempt-left" srcset="imgs/no-vp.png 1x, imgs/no-vp-2x.png 2x" alt="Страница без настройки области просмотра">
<img src="imgs/vp.png" class="attempt-right"  srcset="imgs/vp.png 1x, imgs/vp-2x.png 2x" alt="Страница с настроенной областью просмотра">
<div class="clearfix"></div>


Некоторые браузеры не редактируют ширину страницы и размер контента, а изменяют ориентацию сайта на альбомную или увеличивают масштаб. С помощью атрибута initial-scale=1 можно указать браузеру соотношение пикселей CSS и устройства, равное 1:1 независимо от ориентации дисплея. Благодаря этому страница будет лучше выглядеть в альбомной ориентации.

Note: Разделяйте атрибуты запятыми, чтобы устаревшие версии браузеров могли их правильно интерпретировать.

### Специальные возможности области просмотра

Настроив initial-scale, вы также можете установить следующие атрибуты для области просмотра:

* `minimum-scale`
* `maximum-scale`
* `user-scalable`

После их настройки устанавливается ограничение на изменение масштаба области просмотра, если из-за этого могут стать недоступны специальные возможности.


## Масштабирование контента для области просмотра

Для просмотра сайтов на обычных компьютерах и мобильных устройствах используется вертикальная прокрутка. Если пользователю приходится прокручивать сайт по горизонтали или уменьшать масштаб, чтобы увидеть страницу полностью, он испытывает большие неудобства.


### TL;DR {: .hide-from-toc }
- Не используйте крупные элементы с фиксированной шириной.
- Для корректного отображения контента не ограничивайте его определенной шириной области просмотра.
- Используйте медиазапросы CSS, чтобы указать разные стили для больших и маленьких экранов.


Используя метатег viewport при разработке сайта для мобильных устройств, можно по ошибке создать контент страницы, которые не полностью соответствует определенной области просмотра. Например, если ширина показываемого изображения больше области просмотра, придется использовать горизонтальную прокрутку. Чтобы избавить пользователей от этой необходимости, потребуется подогнать контент под шир ну области просмотра.

Диапазон размеров экрана и ширины в пикселях CSS очень велик (например, телефоны могут значительно отличаться от планшетов или даже от других телефонов), поэтому отображение контента не должно зависеть от конкретной ширины области просмотра.

Установка больших абсолютных значений ширины CSS для компонентов страницы сделает div слишком большим для более узкой области просмотра (например, на устройствах шириной 320 пикселей CSS, таких как iPhone). Вместо этого можно использовать значения в относительных единицах, например width: 100%.  Также старайтесь избегать больших абсолютных значений позиционирования. Из-за них на маленьком экране элемент может оказаться эа пределами области просмотра.

<img src="imgs/vp-fixed-iph.png" class="attempt-left" srcset="imgs/vp-fixed-iph.png 1x, imgs/vp-fixed-iph-2x.png 2x"  alt="Страница с элементом фиксированной ширины (344 пикс.) на iPhone.">
<img src="imgs/vp-fixed-n5.png" class="attempt-right" srcset="imgs/vp-fixed-n5.png 1x, imgs/vp-fixed-n5-2x.png 2x"  alt="Страница с элементом фиксированной ширины (344 пикс.) на Nexus 5.">
<div class="clearfix"></div>



## Улучшение отзывчивости с помощью медиазапросов CSS


Медиазапросы - это простые фильтры, которые можно применять к стилям CSS.  Они позволяют изменять стили на основании характеристик устройства, связанных с отображением контента, включая тип, ширину, высоту, ориентацию и даже разрешение экрана.




### TL;DR {: .hide-from-toc }
- Медиазапросы также позволяют выбрать стиль на основе характеристик устройства.
- Добавьте <code>min-width</code> вместо <code>min-device-width</code> для корректного отображения сайта на большинстве устройств.
- Чтобы не нарушать структуру макета, используйте элементы относительных размеров.



Например, вы можете поместить в медиазапрос print все стили, необходимые для печати:


    <link rel="stylesheet" href="print.css" media="print">
    

Кроме использования атрибут media в ссылке на таблицу стилей существует ещё два способа применить медиазапросы @media и @import, которые можно встроить в файл CSS:  Приоритет отдается первым двум методам, более эффективным, чем синтаксис @import (см. [Избегайте правила @import](/web/fundamentals/performance/critical-rendering-path/page-speed-rules-and-recommendations)).


    @media print {
      /* print style sheets go here */
    }
    
    @import url(print.css) print;
    

Логика медиазапросов не является взаимоисключающей, поэтому к блоку CSS применяются все фильтры, отвечающие его критериям. Порядок применения фильтров обусловлен стандартными правилами CSS.

### Применение медиазапросов на основе размера области просмотра

С помощью медиазапросов можно создать отзывчивую среду, в которой к каждому размеру экрана будут применяться подходящие стили.  Синтаксис медиазапросов допускает создание правил, которые применяются на основании характеристик устройства.


    @media (query) {
      /* CSS Rules used when query matches */
    }
    

В отзывчивом веб-дизайне наиболее часто используются функции min-width, max-width, min-height и max-height (хотя возможны и другие запросы).


<table>
    <thead>
    <tr>
      <th data-th="атрибут">Атрибут</th>
      <th data-th="результат">Результат</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td data-th="атрибут"><code>min-width</code></td>
      <td data-th="результат">Правило применяется к браузеру, ширина которого больше значения, указанного в запросе.</td>
    </tr>
    <tr>
      <td data-th="атрибут"><code>max-width</code></td>
      <td data-th="результат">Правило применяется к браузеру, ширина которого меньше значения, указанного в запросе.</td>
    </tr>
    <tr>
      <td data-th="атрибут"><code>min-height</code></td>
      <td data-th="результат">Правило применяется к браузеру, высота которого больше значения, указанного в запросе.</td>
    </tr>
    <tr>
      <td data-th="атрибут"><code>max-height</code></td>
      <td data-th="результат">Правило применяется к браузеру, высота которого меньше значения, указанного в запросе.</td>
    </tr>
    <tr>
      <td data-th="атрибут"><code>orientation=portrait</code></td>
      <td data-th="результат">Правило применяется к браузеру, высота которого не меньше его ширины.</td>
    </tr>
    <tr>
      <td data-th="атрибут"><code>orientation=landscape</code></td>
      <td data-th="результат">Правило применяется к браузеру, ширина которого больше высоты.</td>
    </tr>
  </tbody>
</table>

Рассмотрим пример:

<figure>
  <img src="imgs/mq.png" class="center" srcset="imgs/mq.png 1x, imgs/mq-2x.png 2x" alt="Просмотр страницы, использующей медиазапросы джля корректировки при изменении размеров.">
  
</figure>

<pre class="prettyprint">
{% includecode content_path="web/fundamentals/design-and-ux/responsive/_code/media-queries.html" region_tag="mqueries" adjust_indentation="auto" %}
</pre>

* При ширине браузера от <b>0 пикс.</b> до <b>640 пикс.</b> применяется max-640px.css.
* При ширине браузера от <b>500 пикс.</b> до <b>600 пикс.</b> применяются стили из @media.
* При ширине браузера <b>от 640 пикс. и выше</b> применяется min-640px.css.
* Если в браузере <b>ширина больше высоты</b>, применяется landscape.css.
* Если в браузере <b>высота больше ширины</b>, применяется portrait.css.


### Примечание к min-device-width

Также возможно создание запросов на основании *-device-width, хотя делать это **настоятельно не рекомендуется**.

Разница небольшая, но очень важная: min-width исходит из размера окна браузера, а min-device-width - из размера экрана устройства.  К сожалению, некоторые браузеры (включая устаревшую версию браузера для Android) не всегда правильно определяют ширину области просмотра и вместо нее могут сообщить размер экрана в пикселях устройства.

К тому же, использование *-device-width может помешать контенту подстроиться под экран обычного компьютера или другого устройства, на котором можно изменить размер окна. Причина в том, что этот запрос основан на размере конкретного устройства, а не окна браузера.

### Использование относительных единиц

Основной принцип отзывчивого веб-дизайна (и главное отличие от макетов с фиксированной шириной) - подвижность и пропорциональность.  Использование относительных размеров помогает упростить макет и предотвратить случайное создание компонентов, не вмещающихся в область просмотра.

Например, установка параметра width равным 100% для блока div верхнего уровня приведет к тому, что он будет заполнять всю ширину области просмотра и никогда не будет слишком мал или велик для нее.  Блок div в любом случае будет соответствовать экрану, будь то iPhone (320 пикс.), Blackberry Z10 (342 пикс.) или Nexus 5 (360 пикс.).

Кроме того, использование относительных единиц позволяет браузерам отображать контент, исходя из пользовательского масштаба. Это значит, что горизонтальная панель прокрутки на странице не понадобится.

<span class="compare-worse">Not recommended</span> — fixed width

    div.fullWidth {
      width: 320px;
      margin-left: auto;
      margin-right: auto;
    }


<span class="compare-better">Recommended</span> — responsive width

    div.fullWidth {
      width: 100%;
    }



## Выбор контрольных точек

Будьте осторожны при определении контрольных точек на основе классов устройств.  Если при установке этих точек вы будете ориентироваться на все доступные устройства, бренды или операционные системы, техническое обслуживание сайта станет практически невозможным. Лучше, если контент будет сам определять, как макет должен подстраиваться под контейнер.



### TL;DR {: .hide-from-toc }
- Создавайте контрольные точки на основе контента, а не для отдельных устройств, продуктов или брендов.
- Сначала разработайте дизайн для самого маленького мобильного устройства, а затем переходите к версиям для больших экранов.
- Ограничьте длину строк 70-80 символами.


### Выбор главных контрольных точек: от меньшего к большему

Сначала разработайте дизайн контента для маленьких экранов, а затем увеличивайте его, пока не возникнет необходимость в контрольной точке.  Так вы оптимизируете контрольные точки на основе контента и используете их минимальное количество.

В качестве примера рассмотрим уже знакомый вам [прогноз погоды](/web/fundamentals/design-and-ux/responsive/).
Сначала сделаем так, чтобы прогноз хорошо смотрелся на небольшом экране.

<figure>
  <img src="imgs/weather-1.png" class="center" srcset="imgs/weather-1.png 1x, imgs/weather-1-2x.png 2x" alt="Просмотр прогноза погоды на небольшом экране.">
  
</figure>

Затем увеличим размер окна браузера, пока между элементами не появится слишком много пустого пространства. Теперь прогноз погоды выглядит не так красиво.  Вы можете выбрать любое значение, но 600 пикселей - это слишком много.

<figure>
  <img src="imgs/weather-2.png" class="center" srcset="imgs/weather-2.png 1x, imgs/weather-2-2x.png 2x" alt="Просмотр прогноза погоды при увеличении ширины страницы.">
  
</figure>

Чтобы сделать 600 пикселей контрольной точкой, нужно создать две таблицы стилей: одну для меньших значений, другую для больших.

<pre class="prettyprint">
{% includecode content_path="web/fundamentals/design-and-ux/responsive/_code/weather-2.html" region_tag="mqweather2" adjust_indentation="auto" %}
</pre>

В конце проведите рефакторинг CSS.  В этом примере мы поместили общие стили (шрифты, значки, цвета и базовое позиционирование) в weather.css.  Затем мы включили макет для маленьких экранов в weather-small.css, а для больших - в weather-large.css.

<figure>
  <img src="imgs/weather-3.png" class="center" srcset="imgs/weather-3.png 1x, imgs/weather-3-2x.png 2x" alt="Preview of the weather forecast designed for a wider screen.">
  
</figure>

### Выбор второстепенных контрольных точек (если необходимо)

Отметив главными контрольными точками крупные изменения макета, внесите второстепенные корректировки.  Например, между главными контрольными точками можно установить отступы для элемента или увеличить размер шрифта, чтобы он смотрелся в макете более естественно.

Начнем с оптимизации макета для небольших экранов.  В данном случае мы увеличим шрифт для ширины области просмотра, превышающей 360 пикселей.  Теперь, когда места достаточно, мы можем расположить минимальную температуру на одной линии с максимальной, а не под ней.  Также немного увеличим значки погодных явлений.

<pre class="prettyprint">
{% includecode content_path="web/fundamentals/design-and-ux/responsive/_code/weather-small.css" region_tag="mqsmallbpsm"   adjust_indentation="auto" %}
</pre>


<img src="imgs/weather-4-l.png" class="attempt-left"  srcset="imgs/weather-4-l.png 1x, imgs/weather-4-l-2x.png 2x" alt="Before adding minor breakpoints.">
<img src="imgs/weather-4-r.png" class="attempt-right"  srcset="imgs/weather-4-r.png 1x, imgs/weather-4-r-2x.png 2x" alt="After adding minor breakpoints.">
<div class="clearfix"></div>


Этим же способом можно ограничить размер панели прогноза погоды для больших экранов, чтобы она не занимала всю доступную ширину.

<pre class="prettyprint">
{% includecode content_path="web/fundamentals/design-and-ux/responsive/_code/weather-large.css" region_tag="mqsmallbplg"   adjust_indentation="auto" %}
</pre>

### Оптимизация текста для чтения

Согласно распространенной теории, самой удобной для чтения является колонка с длиной строки около 70-80 знаков (8-10 слов). Поэтому для всех текстовых блоков, ширина которых превышает 10 слов, следует установить контрольную точку.

<img src="imgs/reading-ph.png" class="attempt-left"  srcset="imgs/reading-ph.png 1x, imgs/reading-ph-2x.png 2x" alt="Без второстепенных контрольных точек">
<img src="imgs/reading-de.png" class="attempt-right"  srcset="imgs/reading-de.png 1x, imgs/reading-de-2x.png 2x" alt="После добавления второстепенных контрольных точек">
<div class="clearfix"></div>


Рассмотрим подробнее приведенный выше пример записи в блоге.  На маленьком экране отлично помещаются строки длиной в 10 слов шрифтом Roboto с размером 1em, но для экранов большего размера необходимо установить контрольную точку. В этом случае для окна просмотра браузера размером больше 575 пикселей оптимальная ширина контента равна 550 пикселям.

<pre class="prettyprint">
{% includecode content_path="web/fundamentals/design-and-ux/responsive/_code/reading.html" region_tag="mqreading"   adjust_indentation="auto" %}
</pre>

### Никогда не скрывайте контент полностью

Внимательно выбирайте информацию, которая будет показана или скрыта в зависимости от размера экрана.
Не убирайте контент только потому, что не можете разместить его на экране.  Потребности пользователей не зависят от его размера.  Например, если вы уберете из прогноза погоды информацию о содержании пыльцы в воздухе, это может стать серьезной проблемой для аллергиков, решающих, стоит ли сегодня выходить из дома.
