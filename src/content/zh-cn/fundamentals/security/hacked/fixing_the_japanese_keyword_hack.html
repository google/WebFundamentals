<html devsite><head>
  <title>解决日语关键字黑客入侵问题</title>
  <meta name="project_path" value="/web/fundamentals/_project.yaml"/>
  <meta name="book_path" value="/web/fundamentals/_book.yaml"/>
<meta name="devsite_continuous_localization_fp" value="DGV7xNragN9HZ8y5MSlU2fxANYcQNA3KoE+YsYU0AtWHaYTDuDS8VMrRRGtvrq7FMcXWQdN5Hd3JAPNLQcUKrrvzQu5oWkLB+fiCoJN0cmoailNK2BnFK9vo6D7ZUkV7Qcmve4gLC1dniNzb2FV146rz+M3RfOj6o9TWwqB6UaE="></meta><meta name="devsite_continuous_localization_translatable_html_file_type" value="source"></meta></head>

<body>

<p>本指南专门针对的是一种在您的网站上创建自动生成的日语文字的黑客行为，我们将这种黑客行为称为“日语关键字黑客行为”。我们专门针对<a href="https://en.wikipedia.org/wiki/Web_content_management_system#Notable_web_CMS" l10n-encrypted-href="fDAavPipNi3L7oKW173OnAOrZfK8qSBsW73e1nANJzBUmOWztsjdEWYvTckdpiUrlx3KV5JDmfAX78Sj/1rTByEHYmzohOA6JH22pQy1iU4=">热门内容管理系统</a> (CMS) 的用户推出了这一指南；但即使您并未使用内容管理系统，本指南也会对您有帮助。</p>

<p><strong>注意</strong>：不确定您的网站是否遭到了入侵？请先阅读我们的<a href="/web/fundamentals/security/hacked/how_do_I_know_if_site_hacked">如何检查您的网站是否遭到了入侵</a>指南。</p>

<aside class="note">我们希望确保本指南确实对您有帮助。请<a href="https://docs.google.com/a/google.com/forms/d/12iF45BaZuEgwn29A7DOW73rd1Hi_7NiAHCFWB3zMu0U/viewform" l10n-encrypted-href="Y8CvmyoECzXwls/oZTNUPel6/rzBFIuQf3sSK+uodQZOqpR94XBJ+XibPywvk0+b9ezSGKvhi8xxpIK7uGXOCI2dMR8PtqMn9qLJh3QQBiqDN7SHduMZkPeGTm9uywje4+7KYcijq55wcC/P3SGriA==">提供反馈</a>以帮助我们做出改进！</aside>

<h2>目录</h2>

<ul>
  <li><a href="#identifying" l10n-encrypted-href="i8ndmVX5d0ID8O9zoenvuw==">第 1 步：识别此类黑客行为</a></li>
  <li><a href="#fixing" l10n-encrypted-href="E7jyI6Rsf8GvIQvlRXlhig==">第 2 步：解决黑客入侵问题</a></li>
  <li><a href="#resources" l10n-encrypted-href="thupmU05Hk4T+qZrFSNMSw==">第 3 步：其他资源</a></li>
  <li><a href="/web/fundamentals/security/hacked/FAQs_for_hacked_sites">与被黑网站相关的常见问题解答</a></li>
</ul>

<a name="identifying"></a>
  <h2>识别此类黑客行为</h2>

<p>日语关键字黑客行为通常会使用自动生成的日语文字在您网站上创建新网页，并采用随机生成的目录名（例如 http://example.com/ltjmnjp/341.html）。攻击者的获利方式是：在这些网页中包含指向出售冒牌商品的商店的联属链接，然后让这些网页显示在 Google 搜索结果中。以下是此类网页的外观示例：</p>

<img src="/web/fundamentals/security/hacked/images/JapaneseKeywordHackExamplePage.png" style="padding:0px 25px">

<p>对于此类黑客行为，黑客通常会在 Search Console 中将自己添加为资源所有者，以便通过操纵您网站的各项设置（例如地理位置定位或站点地图）来提高利润。如果您收到通知，声称您不认识的人在 <a href="https://www.google.com/webmasters/tools/" l10n-encrypted-href="bnkUt+0jxHW5UePwiMjGHgSJUyK0ahq5p2Xo+yKO2LCoVUPePn2BCeqpvFwYJx5q">Search Console</a> 中验证了您的网站，则很有可能说明您的网站遭到了入侵。</p>

<p>首先，请在 Search Console 中的<a href="https://www.google.com/webmasters/tools/security-issues" l10n-encrypted-href="wFaZwKx/FqCH4eQvAdZWPgSJUyK0ahq5p2Xo+yKO2LDoa3a6ko9L8TWTgkY4BqOep2DEtUsCy0Ve7mU772iG0Q==">安全问题工具</a>中查看 Google 是否在您的网站上发现了上述任何被黑网页。您还可以通过打开 Google 搜索并搜索 <code class="notranslate l10n-notranslate">site:[your site root URL]</code> 来发现此类网页。搜索结果页面将会显示 Google 已针对您的网站编入索引的网页，其中也包括被黑网页。您可以翻阅几页搜索结果，看看能否发现任何异常网址。如果您在 Google 搜索结果中没有看到任何被黑内容，请使用其他搜索引擎搜索相同的搜索字词。其他搜索引擎可能会显示 Google 已从索引中移除的被黑内容。此操作的效果如以下示例所示。</p>

<img src="/web/fundamentals/security/hacked/images/JapaneseKeywordHackExampleSearch.png" style="padding:0px 25px">

<p>请注意，上面的搜索结果包含许多并非由网站所有者创建的网页。如果您仔细查看相关描述，便会看到这种黑客行为所创建的日语文字的示例。</p>

<p>当您访问被黑网页时，您可能会看到一条表示网页不存在的消息（例如 404 错误）。别被骗了！黑客会试图使您相信被黑网页已消失或修复，从而诱使您认为您的网站已修复。为此，他们会<a href="https://support.google.com/webmasters/answer/66355" l10n-encrypted-href="5TGqX3BGnR1wDX3q2UuoUl8/1IcWIMZShUywi8+OFhGczDdT//DB7d2bh+zxFqausFnRYfcPdJtT7j/7LC0qWg==">隐藏真实内容</a>。您可以在 Search Console 的 <a href="https://www.google.com/webmasters/tools/googlebot-fetch" l10n-encrypted-href="wFaZwKx/FqCH4eQvAdZWPgSJUyK0ahq5p2Xo+yKO2LAiz85uaQL1OSHmh9ZlIHN5PBF3nzIP4FICVwj1Kz6IHg==">Google 抓取工具</a>中输入您网站的网址，以此来检查是否存在隐藏真实内容的问题。Google 抓取工具可以让您看到潜在的隐藏内容。</p>

<a name="fixing"></a>
  <h2>解决黑客入侵问题</h2>
<p>开始前，请先为您要移除的任何文件创建离线副本，以备日后需要恢复这些文件时使用。在开始执行清理流程之前，最好先备份您的整个网站。为此，您可以将您服务器上的所有文件保存到服务器之外的位置，或搜索最适合您的特定内容管理系统 (CMS) 的备份选项。如果您使用了内容管理系统，则还应该备份相应的数据库。</p>

  <h3>从 Search Console 中移除新建的帐号</h3>
<p>如果有人向您的 Search Console 帐号中添加了您不认识的新所有者，请尽快撤消他们的访问权限。您可以在 <a href="https://www.google.com/webmasters/verification" l10n-encrypted-href="w+/AxGxgV5VhCAsoJueEswSJUyK0ahq5p2Xo+yKO2LBRkz9eV7ohMxFBbvqnrm26jlSneBdGNunDHPmxSA8Tjw==">Search Console 验证页</a>上检查您网站的哪些用户通过了验证。点击此网站的“验证详情”即可查看所有已通过验证的用户。</p>

<p>要从 Search Console 中移除所有者，请参阅<a href="https://support.google.com/webmasters/answer/2453966" l10n-encrypted-href="h8KunduxzUQTzb6KfNx3KV8/1IcWIMZShUywi8+OFhGczDdT//DB7d2bh+zxFqauvOHSfE0UitWWNywfgF9JeA==">管理用户、所有者和权限</a>这篇帮助中心文章的“移除所有者”部分。您需要移除相关联的验证令牌（通常是您网站的根目录上的 HTML 文件或动态生成的模仿 HTML 文件的 .htaccess 文件）。</p>

<p>如果您在网站上找不到 HTML 验证令牌，请检查 .htaccess 文件中是否存在重写规则。该重写规则如下所示：</p>

<pre class="notranslate l10n-notranslate prettyprint">
  RewriteEngine On
  RewriteRule ^google(.*)\.html$ dir/file.php?google=$1 [L] </pre>

<p><b>注意</b>：您通常可以转到模拟的验证令牌文件（例如 <code class="notranslate l10n-notranslate">wwww.example.com/google[random number and letters].html</code>），以检查您是否成功移除了动态生成的验证令牌。例如，如果您的网站是 www.brandonsbaseballcards.com，则尝试转到 www.brandonsbaseballcards.com/google1234.html。如果该网页返回了 HTTP 404，这说明动态生成的验证令牌可能已修复。</p>

<p>要从 .htaccess 文件中移除动态生成的验证令牌，请按以下步骤操作。

  </p><h3>检查 .htaccess 文件（共 2 步）</h3>
<p>除了使用 .htaccess 文件创建动态生成的验证令牌之外，黑客还经常使用 .htaccess 规则将用户重定向到或创建乱码垃圾内容网页。除非您有自定义的 .htaccess 规则，否则请考虑将 .htaccess 替换为全新的副本。</p>

  <strong>第 1 步</strong>
<p>查找您网站上的 .htaccess 文件。如果您不确定在哪里可以找到此文件，并且您使用了 WordPress、Joomla 或 Drupal 等内容管理系统，请在搜索引擎中同时搜索“.htaccess 文件的位置”以及您的内容管理系统的名称。您可能有多个 .htaccess 文件，具体取决于您的网站。然后，列出所有 .htaccess 文件的位置。</p>

  <strong>第 2 步</strong>
<p>将所有 .htaccess 文件替换为相应 .htaccess 文件的未遭入侵版本或默认版本。您通常可以通过同时搜索“默认 .htaccess 文件”和您的内容管理系统的名称来查找 .htaccess 文件的默认版本。对于拥有多个 .htaccess 文件的网站，请查找每个文件的未遭入侵版本并进行替换。</p>

<p><strong>注意</strong>：.htaccess 通常是“隐藏文件”。请确保您在搜索此类文件时启用了显示隐藏文件选项。</p>

  <h3>移除所有恶意文件和脚本（共 4 步）</h3>
<p>识别恶意文件可能会有些棘手，并且可能需要几个小时才能完成。在检查文件时请不要着急。如果您尚未备份网站上的文件，这便是个好时机。您可以在 Google 搜索中同时搜索“备份网站”以及您的内容管理系统的名称，以查找有关如何备份网站的说明。</p>

  <strong>第 1 步</strong>
<p>如果您使用了内容管理系统，请重新安装此内容管理系统的默认分发中附带的所有核心（默认）文件。这样有助于确保这些文件中不含被黑内容。您可以在 Google 搜索中同时搜索“重新安装”以及您的内容管理系统的名称，以查找有关重新安装流程的说明。如果您有任何插件、模块、扩展程序或主题背景，请确保您也重新安装了这些内容。</p>

<p>如果您直接修改过核心文件，则重新安装这些文件可能会导致您所做的任何自定义设置丢失。请务必先为您的数据库和所有文件创建备份，然后再重新安装。</p>

  <strong>第 2 步</strong>
<p>黑客通常会修改您的站点地图或添加新的站点地图，以便使他们的网址更快速地编入索引。如果您之前有站点地图文件，请检查此文件是否存在任何可疑链接，并将其从站点地图中移除。如果存在任何您不记得向网站添加过的站点地图文件，请仔细检查；如果其中只包含垃圾内容网址，请将其移除。</p>

  <strong>第 3 步</strong>
<p>查找任何剩余的恶意或遭到入侵的文件。您可能在前两个步骤中已经移除了所有的恶意文件，但我们仍建议您执行下面这几个步骤，以免网站上仍然存留遭到入侵的文件。</p>

<p>不要由于认为需要打开并查看每个 PHP 文件而感到太大压力。首先，请创建一个您想要调查的可疑 PHP 文件的列表。以下几种方法可用于确定哪些 PHP 文件可疑：</p>
   <ul>
    <li>由于您已经重新加载了内容管理系统文件，所以您只需查看不包含在默认内容管理系统文件或文件夹范围内的文件。这样应该可以排除大量 PHP 文件，并只需检查少数文件。</li>
    <li>按最后修改日期对网站上的文件进行排序。查找在您首次发现网站遭到入侵后的几个月内遭到修改的文件。</li>
    <li>按大小对网站上的文件进行排序。查找是否有任何异常大的文件。</li>
  </ul>

<p><strong>注意</strong>：攻击者通常会向以下文件注入脚本：index.php、wp-load.php、404.php 以及 view.php。</p>

  <strong>第 4 步</strong>
<p>创建好可疑 PHP 文件的列表之后，请检查这些文件是否可疑。如果您对 PHP 文件不熟悉，该流程可能会消耗更多时间，因此不妨重温一些 <a href="https://php.net/docs.php">PHP 文档</a>。如果您是刚开始接触编码，建议您<a href="/web/fundamentals/security/hacked/support_team">获取帮助</a>。与此同时，您可以通过一些基本模式来查找恶意文件。</p>

<p>如果您使用了内容管理系统，并且没有直接修改相关文件的习惯，则将您服务器上的文件与相应内容管理系统及任何插件和主题背景的默认文件列表进行比较。查找不包含在列表内的文件，以及大小似乎比默认版本更大的文件。</p>

<p>扫描您已经找到的可疑文件，以查找迷惑性的代码块。这种代码块可能看起来像看似混乱的字母和数字组合。迷惑性代码的前面通常是 PHP 函数组合（例如 base64_decode、rot13、eval、strrev、gzinflate），不过有时甚至这些函数都具有迷惑性。下面是此类代码块的一个示例。有时，所有此类代码会被填充到一长串文本中，使其看起来小于实际大小：</p>

<pre class="notranslate l10n-notranslate prettyprint">
  $O_O0O_O0_0=urldecode("%6E1%7A%62%2F%6D%615%5C%76%740%6928%2D%70
  %78%75%71%79%2A6%6C%72%6B%64%679%5F%65%68%63%73%77%6F4%2B%6637%6A");
  $OO0_0OO0__=$O_O0O_O0_0{26}.$O_O0O_O0_0{6}.$O_O0O_O0_0{10}.$O_O0O_O0_0{30}</pre>

  <h3>检查您的网站是否已清理干净</h3>
<p>删除被黑文件之后，请检查您的辛苦工作是否已见成效。还记得您早先发现的那些乱码网页吗？再次使用“Google 抓取工具”检查这些网页，看它们是否仍然存在。如果它们在“Google 抓取工具”中的结果是“未找到”，则说明您的网站很可能处于良好状态！</p>

<p>您还可以按照<a href="https://support.google.com/webmasters/troubleshooter/6155978" l10n-encrypted-href="L9cotzWz1Gz2EXZ4cybZUF8/1IcWIMZShUywi8+OFhFaf4PNa8lHkLSIkkiloXraU+YkdKmDgr9qSLhT4Aj5jg==">“被黑客入侵的网站”问题排查工具</a>中的步骤检查网站上是否仍然存在被黑内容。</p>

  <h3>如何防止再次遭到入侵？</h3>
<p>修复网站上的漏洞是修复网站的最后一个关键步骤。<a href="https://security.googleblog.com/2016/04/helping-webmasters-re-secure-their-sites.html" l10n-encrypted-href="HaoVnhrvp1ipt6jkrRLULkQg8+fqoPqLZVbZwHZzVSGEbm/ALd8tKcGkbG0DXJPH9mJYV+4aaiZf3CtTQGk0SoAD8yPFagwfQx1QvJaFoc6lviyJWslHwkLxMOd1ngrY">最近的一项研究</a>发现，12% 的被黑网站会在 30 天内再次遭到入侵。了解网站遭到入侵的具体方式非常有用。请参阅我们的<a href="/web/fundamentals/security/hacked/top_ways_websites_get_hacked_by_spammers">垃圾内容发布者最常用的网站入侵方法</a>指南以开始调查问题。不过，如果您无法找出网站遭到入侵的方式，则可以按照以下核对清单操作，以减少网站上的漏洞：</p>
  <ul>
    <li><strong>定期扫描计算机</strong>：使用受信任的病毒扫描程序检查是否存在病毒或漏洞。</li>
    <li><strong>定期更改密码</strong>：定期更改用于所有网站帐号（例如托管服务提供商、FTP 和内容管理系统）的密码可以阻止攻击者未经授权地访问您的网站。为每个帐号分别创建一个唯一的安全系数高的密码很重要。</li>
    <li><strong>使用<a href="https://en.wikipedia.org/wiki/Two-factor_authentication" l10n-encrypted-href="9xQhRBOSn9SmNcpVG2sojwOrZfK8qSBsW73e1nANJzDifCX+gGFDlLulOI0L7gbBir3zffj4Scth1kJJ0GCu7g==">双重身份验证 (2FA)</a></strong>：考虑针对任何需要您登录的服务启用双重身份验证功能。双重身份验证功能让黑客难以登录，即使他们成功窃取了您的密码也没关系。</li>
    <li><strong>定期更新内容管理系统、插件、扩展程序和模块</strong>：希望您已经执行此步骤。许多网站遭到入侵，是因为网站上运行了过期软件。某些内容管理系统支持自动更新功能。</li>
    <li><strong>考虑订阅安全服务以监控您的网站</strong>：有许多优秀的服务可以帮助您监控网站，并且只需支付少量的费用。您可以考虑注册此类服务以确保您网站的安全。</li>
  </ul>


<a name="resources"></a>
  <h2>其他资源</h2>
<p>如果您在修复网站时仍然遇到问题，还有一些其他资源或许可以帮助您。</p>

<p>这些工具可对您的网站进行扫描，并且可能会找出有问题的内容。除 VirusTotal 以外，Google 不会运行或支持其他工具。</p>

<p><a href="https://www.virustotal.com/" l10n-encrypted-href="+yh4nIlcln/5B9bKgkfEGM782VG+rd3m0a4VL0AU26M=">Virus Total</a>、<a href="https://aw-snap.info/">Aw-snap.info</a>、<a href="https://sitecheck.sucuri.net/" l10n-encrypted-href="onZPCmFW+G106sKkIlw02x6VPeWQ/7qXNFWdb9FQ4feq8/jN0Xzo+qPU1sKgelGh">Sucuri Site Check</a>、<a href="https://www.quttera.com/">Quttera</a>：这些工具（此外还有许多其他工具）也许能够通过扫描您的网站来找出有问题的内容。但请注意，这些扫描工具无法保证一定能找到每一类有问题的内容。</p>

<p>下面是 Google 提供的可为您提供帮助的其他资源：</p>

<ul>
<li><a href="//support.google.com/webmasters/go/community" l10n-encrypted-href="+MnmPhXLuMxD2VLFLngQ0KArGd6SuOrIdKNhJ8TAfI9k4yrci9ag38FePALAXcE0">Google 网站站长帮助论坛</a></li>
<li><a href="/web/fundamentals/security/hacked/">针对被黑网站的 Google 网站站长帮助</a></li>
<li><a href="//safebrowsing.google.com/" l10n-encrypted-href="1ZOZ2H6Eo250Va95oXrumTbQA6KByQU0uWZ6m4BBYCY=">Google 安全浏览</a></li>
</ul>






</body></html>
